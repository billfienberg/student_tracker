
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" href="css/normalize.css" type="text/css" media="screen">
  <link rel="stylesheet" href="css/grid.css" type="text/css" media="screen">
  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen">
  <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
  <script src="external/matchmedia.js"></script>
  <script src="picturefill.js"></script>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 90%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
var markersArray = [];
var markers = [];
function clearOverlays() {
  for (var i = 0; i < markersArray.length; i++ ) {
    markersArray[i].setMap(null);
  }
  markersArray.length = 0;
};

function initialize() {
  var myLatlng = new google.maps.LatLng(39.50, -98.35);
  var mapOptions = {
    zoom: 4,
    center: myLatlng
  }
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  $('#origin-btn').on('click', function(e) {
      e.preventDefault();
      window.clearOverlays();
    for (var i = 0; i < gon.students.length; i ++) {

        var lat = gon.students[i].origin_lat;
        var lng = gon.students[i].origin_long;
        var position = new google.maps.LatLng(lat, lng);
        var marker = new google.maps.Marker({
          position: position,
          map: map,
          title: gon.students[i].first_name+" "+gon.students[i].last_name+" in " + gon.students[i].origin_city+", "+gon.students[i].origin_state,
          draggable: true
        })
        markersArray.push(marker);


        google.maps.event.addListener(marker, 'click', function() {
            map.setZoom(8);
            map.setCenter(marker.getPosition());
          });

      };


    });

    $('#current-btn').on('click', function(e) {
      e.preventDefault();
      window.clearOverlays();
      for (var i = 0; i < gon.students.length; i ++) {
        var lat = gon.students[i].current_lat;
        var lng = gon.students[i].current_long;
        var position = new google.maps.LatLng(lat, lng);

        var marker = new google.maps.Marker({
          position: position,
          map: map,
          title: gon.students[i].first_name+" "+gon.students[i].last_name+" in " + gon.students[i].current_city+", "+gon.students[i].current_state,
          draggable: true
        })
        markersArray.push(marker);


        google.maps.event.addListener(marker, 'click', function() {
            map.setZoom(8);
            map.setCenter(marker.getPosition());
          });

      };

    });
    }

    google.maps.event.addDomListener(window, 'load', initialize);

    // Everything above this works
$("#.")


    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <%= render 'table' %>

  </body>
</html>

